<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Quiz for Children</title>
    <style>
        :root {
            --primary-color: #4a6baf;
            --secondary-color: #8ecae6;
            --success-color: #57cc99;
            --error-color: #e76f51;
            --background-color: #f8f9fa;
            --text-color: #212529;
        }
        
        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        
        .container {
            width: 100%;
            max-width: 600px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 30px;
            position: relative;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .setup-section {
            margin-bottom: 20px;
        }
        
        .setup-section h2 {
            color: var(--primary-color);
            font-size: 20px;
            margin-bottom: 10px;
        }
        
        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .option-box {
            background-color: white;
            border: 2px solid var(--secondary-color);
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1 0 calc(50% - 10px);
            text-align: center;
            font-size: 16px;
        }
        
        .option-box:hover {
            background-color: #f0f7fa;
        }
        
        .option-box.selected {
            background-color: var(--secondary-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .operation-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .operation-box {
            background-color: white;
            border: 2px solid var(--secondary-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1 0 calc(25% - 10px);
            text-align: center;
            font-size: 20px;
        }
        
        .operation-box:hover {
            background-color: #f0f7fa;
        }
        
        .operation-box.selected {
            background-color: var(--secondary-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .number-input {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .number-input label {
            font-size: 16px;
            margin-right: 10px;
        }
        
        .number-input input {
            width: 80px;
            padding: 8px;
            border: 2px solid var(--secondary-color);
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
        }
        
        .start-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            margin: 30px auto 0;
            width: 100%;
            max-width: 200px;
        }
        
        .start-button:hover {
            background-color: #3a5a99;
        }
        
        .quiz-section {
            display: none;
        }
        
        .progress-container {
            width: 100%;
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.5s;
        }
        
        .question-display {
            font-size: 32px;
            text-align: center;
            margin: 30px 0;
        }
        
        .answer-form {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .answer-input {
            padding: 10px;
            font-size: 20px;
            width: 100px;
            border: 2px solid var(--secondary-color);
            border-radius: 8px;
            text-align: center;
            margin-right: 10px;
        }
        
        .submit-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-button:hover {
            background-color: #3a5a99;
        }
        
        .submit-button:disabled {
            background-color: #b0b0b0;
            cursor: not-allowed;
        }
        
        .feedback {
            text-align: center;
            font-size: 20px;
            margin: 20px 0;
            min-height: 30px;
        }
        
        .correct {
            color: var(--success-color);
        }
        
        .incorrect {
            color: var(--error-color);
        }
        
        .next-button {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: none;
            margin: 0 auto;
        }
        
        .next-button:hover {
            background-color: #7dbcd6;
        }
        
        .results-section {
            display: none;
            text-align: center;
        }
        
        .results-section h2 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .score-display {
            font-size: 48px;
            margin: 20px 0;
            color: var(--primary-color);
        }
        
        .restart-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            margin: 30px auto 0;
        }
        
        .restart-button:hover {
            background-color: #3a5a99;
        }
        
        .answer-summary {
            margin-top: 20px;
            text-align: left;
        }
        
        .answer-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .answer-item:last-child {
            border-bottom: none;
        }
        
        .correct-item {
            color: var(--success-color);
        }
        
        .incorrect-item {
            color: var(--error-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Math Quiz for Children</h1>
        
        <!-- Setup Section -->
        <div id="setup-section" class="setup-section">
            <div class="setup-section">
                <h2>Choose Operations</h2>
                <div class="operation-container">
                    <div class="operation-box" data-operation="addition">+</div>
                    <div class="operation-box" data-operation="subtraction">−</div>
                    <div class="operation-box" data-operation="multiplication">×</div>
                    <div class="operation-box" data-operation="division">÷</div>
                </div>
            </div>
            
            <div class="setup-section">
                <h2>Choose Difficulty</h2>
                <div class="options-container">
                    <div class="option-box selected" data-difficulty="easy">Easy (1 digit)</div>
                    <div class="option-box" data-difficulty="medium">Medium (2 digits)</div>
                    <div class="option-box" data-difficulty="hard">Hard (3 digits)</div>
                </div>
            </div>
            
            <div class="setup-section">
                <h2>Number of Questions</h2>
                <div class="number-input">
                    <label for="question-count">How many questions?</label>
                    <input type="number" id="question-count" min="1" max="50" value="10">
                </div>
            </div>
            
            <button id="start-button" class="start-button">Start Quiz</button>
        </div>
        
        <!-- Quiz Section -->
        <div id="quiz-section" class="quiz-section">
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            
            <div id="question-display" class="question-display"></div>
            
            <div class="answer-form">
                <input type="number" id="answer-input" class="answer-input" placeholder="Answer">
                <button id="submit-button" class="submit-button">Submit</button>
            </div>
            
            <div id="feedback" class="feedback"></div>
            
            <button id="next-button" class="next-button">Next Question</button>
        </div>
        
        <!-- Results Section -->
        <div id="results-section" class="results-section">
            <h2>Quiz Complete!</h2>
            <p>Your final score:</p>
            <div id="score-display" class="score-display"></div>
            
            <div id="answer-summary" class="answer-summary"></div>
            
            <button id="restart-button" class="restart-button">Take Another Quiz</button>
        </div>
    </div>
    
    <script>
        // DOM Elements
        const setupSection = document.getElementById('setup-section');
        const quizSection = document.getElementById('quiz-section');
        const resultsSection = document.getElementById('results-section');
        const startButton = document.getElementById('start-button');
        const questionDisplay = document.getElementById('question-display');
        const answerInput = document.getElementById('answer-input');
        const submitButton = document.getElementById('submit-button');
        const nextButton = document.getElementById('next-button');
        const feedback = document.getElementById('feedback');
        const progressBar = document.getElementById('progress-bar');
        const scoreDisplay = document.getElementById('score-display');
        const answerSummary = document.getElementById('answer-summary');
        const restartButton = document.getElementById('restart-button');
        const questionCountInput = document.getElementById('question-count');
        const operationBoxes = document.querySelectorAll('.operation-box');
        const difficultyOptions = document.querySelectorAll('.option-box');
        
        // Quiz State
        const quizState = {
            questions: [],
            currentQuestionIndex: 0,
            correctAnswers: 0,
            quizComplete: false,
            selectedOperations: ['multiplication'],
            difficulty: 'easy',
            questionCount: 10,
            questionResults: []
        };
        
        // Operation Symbols
        const operationSymbols = {
            addition: '+',
            subtraction: '−',
            multiplication: '×',
            division: '÷'
        };
        
        // Initialize
        function init() {
            // Default select multiplication
            document.querySelector('.operation-box[data-operation="multiplication"]').classList.add('selected');
            
            // Setup event listeners
            setupEventListeners();
        }
        
        // Event Listeners
        function setupEventListeners() {
            // Operation selection
            operationBoxes.forEach(box => {
                box.addEventListener('click', () => {
                    box.classList.toggle('selected');
                    updateSelectedOperations();
                });
            });
            
            // Difficulty selection
            difficultyOptions.forEach(option => {
                option.addEventListener('click', () => {
                    difficultyOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    quizState.difficulty = option.dataset.difficulty;
                });
            });
            
            // Start button
            startButton.addEventListener('click', startQuiz);
            
            // Submit answer
            submitButton.addEventListener('click', checkAnswer);
            answerInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !submitButton.disabled) {
                    checkAnswer();
                }
            });
            
            // Next question
            nextButton.addEventListener('click', nextQuestion);
            
            // Restart quiz
            restartButton.addEventListener('click', restartQuiz);
        }
        
        // Update selected operations
        function updateSelectedOperations() {
            quizState.selectedOperations = [];
            operationBoxes.forEach(box => {
                if (box.classList.contains('selected')) {
                    quizState.selectedOperations.push(box.dataset.operation);
                }
            });
            
            // Ensure at least one operation is selected
            if (quizState.selectedOperations.length === 0) {
                document.querySelector('.operation-box[data-operation="multiplication"]').classList.add('selected');
                quizState.selectedOperations = ['multiplication'];
            }
        }
        
        // Start quiz
        function startQuiz() {
            // Validate inputs
            quizState.questionCount = parseInt(questionCountInput.value);
            if (quizState.questionCount < 1) {
                quizState.questionCount = 1;
                questionCountInput.value = 1;
            }
            if (quizState.questionCount > 50) {
                quizState.questionCount = 50;
                questionCountInput.value = 50;
            }
            
            // Reset quiz state
            quizState.questions = [];
            quizState.currentQuestionIndex = 0;
            quizState.correctAnswers = 0;
            quizState.quizComplete = false;
            quizState.questionResults = [];
            
            // Generate questions
            generateQuestions();
            
            // Show quiz section
            setupSection.style.display = 'none';
            quizSection.style.display = 'block';
            resultsSection.style.display = 'none';
            
            // Display first question
            displayQuestion();
            
            // Focus on answer input
            answerInput.focus();
        }
        
        // Generate questions
        function generateQuestions() {
            for (let i = 0; i < quizState.questionCount; i++) {
                quizState.questions.push(generateQuestion());
            }
        }
        
        // Generate a single question
        function generateQuestion() {
            // Randomly select operation from selected operations
            const operation = quizState.selectedOperations[Math.floor(Math.random() * quizState.selectedOperations.length)];
            
            // Determine number range based on difficulty
            let maxNum;
            switch (quizState.difficulty) {
                case 'easy':
                    maxNum = 9;
                    break;
                case 'medium':
                    maxNum = 99;
                    break;
                case 'hard':
                    maxNum = 999;
                    break;
                default:
                    maxNum = 9;
            }
            
            let num1 = Math.floor(Math.random() * maxNum) + 1;
            let num2 = Math.floor(Math.random() * maxNum) + 1;
            let answer;
            
            // Adjust numbers and calculate answer based on operation
            switch (operation) {
                case 'addition':
                    answer = num1 + num2;
                    break;
                case 'subtraction':
                    // Ensure num1 ≥ num2 to avoid negative answers
                    if (num1 < num2) {
                        [num1, num2] = [num2, num1];
                    }
                    answer = num1 - num2;
                    break;
                case 'multiplication':
                    // Make multiplication easier for medium and hard difficulties
                    if (quizState.difficulty === 'medium') {
                        num2 = Math.floor(Math.random() * 12) + 1;
                    } else if (quizState.difficulty === 'hard') {
                        num2 = Math.floor(Math.random() * 20) + 1;
                    }
                    answer = num1 * num2;
                    break;
                case 'division':
                    // Ensure division results in a whole number
                    answer = Math.floor(Math.random() * maxNum) + 1;
                    num2 = Math.floor(Math.random() * 12) + 1;
                    num1 = answer * num2;
                    break;
            }
            
            return {
                num1,
                num2,
                operation,
                answer
            };
        }
        
        // Display current question
        function displayQuestion() {
            const currentQuestion = quizState.questions[quizState.currentQuestionIndex];
            const operationSymbol = operationSymbols[currentQuestion.operation];
            
            questionDisplay.textContent = `${currentQuestion.num1} ${operationSymbol} ${currentQuestion.num2} = ?`;
            
            // Clear previous answer and feedback
            answerInput.value = '';
            feedback.textContent = '';
            feedback.className = 'feedback';
            
            // Hide next button
            nextButton.style.display = 'none';
            
            // Enable submit button
            submitButton.disabled = false;
            
            // Update progress bar
            const progress = ((quizState.currentQuestionIndex) / quizState.questionCount) * 100;
            progressBar.style.width = `${progress}%`;
            
            // Focus on answer input
            answerInput.focus();
        }
        
        // Check answer
        function checkAnswer() {
            if (submitButton.disabled) return;
            
            // Disable submit button until next question
            submitButton.disabled = true;
            
            const currentQuestion = quizState.questions[quizState.currentQuestionIndex];
            const userAnswer = parseInt(answerInput.value);
            
            if (isNaN(userAnswer)) {
                feedback.textContent = 'Please enter a number!';
                feedback.className = 'feedback incorrect';
                submitButton.disabled = false;
                return;
            }
            
            const isCorrect = userAnswer === currentQuestion.answer;
            
            // Store result
            quizState.questionResults.push({
                question: `${currentQuestion.num1} ${operationSymbols[currentQuestion.operation]} ${currentQuestion.num2}`,
                userAnswer,
                correctAnswer: currentQuestion.answer,
                isCorrect
            });
            
            if (isCorrect) {
                feedback.textContent = 'Correct! 😊';
                feedback.className = 'feedback correct';
                quizState.correctAnswers++;
            } else {
                feedback.textContent = `Sorry, the correct answer is ${currentQuestion.answer}`;
                feedback.className = 'feedback incorrect';
            }
            
            // Show next button or finish quiz
            quizState.currentQuestionIndex++;
            
            if (quizState.currentQuestionIndex < quizState.questionCount) {
                // Not the last question, show next button
                nextButton.style.display = 'block';
            } else {
                // Last question, finish quiz after a short delay
                setTimeout(finishQuiz, 1500);
            }
        }
        
        // Move to next question
        function nextQuestion() {
            if (quizState.currentQuestionIndex < quizState.questionCount) {
                displayQuestion();
            }
        }
        
        // Finish quiz and show results
        function finishQuiz() {
            quizSection.style.display = 'none';
            resultsSection.style.display = 'block';
            
            // Update score
            const scorePercentage = Math.round((quizState.correctAnswers / quizState.questionCount) * 100);
            scoreDisplay.textContent = `${quizState.correctAnswers} / ${quizState.questionCount} (${scorePercentage}%)`;
            
            // Show answer summary
            answerSummary.innerHTML = '<h3>Question Summary:</h3>';
            
            quizState.questionResults.forEach((result, index) => {
                const answerItemClass = result.isCorrect ? 'answer-item correct-item' : 'answer-item incorrect-item';
                const answerText = result.isCorrect ? 
                    `${result.question} = ${result.userAnswer} ✓` : 
                    `${result.question} = ${result.userAnswer} ✗ (Correct: ${result.correctAnswer})`;
                
                answerSummary.innerHTML += `<div class="${answerItemClass}">${index + 1}. ${answerText}</div>`;
            });
            
            quizState.quizComplete = true;
        }
        
        // Restart quiz
        function restartQuiz() {
            // Show setup section
            setupSection.style.display = 'block';
            resultsSection.style.display = 'none';
        }
        
        // Initialize the app
        init();
    </script>
</body>
</html>
